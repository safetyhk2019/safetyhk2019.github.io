(self.AMP=self.AMP||[]).push({n:"amp-sidebar",v:"1905140117570",f:(function(AMP,_){
var h="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},m;if("function"==typeof Object.setPrototypeOf)m=Object.setPrototypeOf;else{var n;a:{var p={a:!0},q={};try{q.__proto__=p;n=q.a;break a}catch(a){}n=!1}m=n?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var r=m;function u(a){return a?Array.prototype.slice.call(a):[]};self.log=self.log||{user:null,dev:null,userForEmbed:null};var v=self.log;function w(){if(!v.user)throw Error("failed to call initLogConstructor");return v.user}function x(a,b){return w().assert(a,'"toolbar-target" is required',b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)};function y(a,b){var c,d=a.ownerDocument.defaultView,e=d!=(d.__AMP_TOP||d);if(e){if(z(d,b)){var f=A(d,b);if(f)return f}if(!c)return null}a=B(a);a=C(a);return z(a,b)?A(a,b):null}function D(a,b){a=a.__AMP_TOP||a;return A(a,b)}function F(a,b){var c=B(a);c=C(c);return A(c,b)}function B(a){return a.nodeType?D((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function C(a){a=B(a);return a.isSingleDoc()?a.win:a}
function A(a,b){z(a,b);var c=a.services;c||(c=a.services={});var d=c;a=d[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function z(a,b){a=a.services&&a.services[b];return!(!a||!a.ctor&&!a.obj)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var G;function H(a){return":not([toolbar]) [autoscroll]".replace(/^|,/g,"$&"+a+" ")};function I(){var a,b=Object.create(null);a&&Object.assign(b,a);return b};function J(a,b){for(var c;a&&a!==c;a=a.parentElement)if(b(a))return a;return null}function K(a,b){return a.closest?a.closest(b):J(a,function(a){var c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;return c?c.call(a,b):!1})}function aa(a){var b=a.body.getAttribute("dir")||a.documentElement.getAttribute("dir")||"ltr";return"rtl"==b};var L,M="Webkit webkit Moz moz ms O o".split(" ");function N(a,b){void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")};function O(a,b){if(void 0!==G)var c=G;else{try{var d=b.ownerDocument,e=d.createElement("div"),f=d.createElement("div");e.appendChild(f);c=e.querySelector(":scope div")===f}catch(l){c=!1}c=G=c}c?c=b.querySelector(H(":scope")):(b.classList.add("i-amphtml-scoped"),c=H(".i-amphtml-scoped"),c=b.querySelectorAll(c),b.classList.remove("i-amphtml-scoped"),c=void 0===c[0]?null:c[0]);if(c){var g=(a.win.getComputedStyle(b)||I())["overflow-y"];if("scroll"!=g&&"auto"!=g)w().error("AMP-SIDEBAR","for 'autoscroll', 'nav [toolbar]' element must be set to overflow\n        'scroll' or 'auto' for 'autoscroll' to work.");
else{var k=F(a,"viewport");k.animateScrollWithinParent(c,b,"center",0)}}};function P(a,b){this.I=b;this.c=a;this.B=b.getAmpDoc();this.R=this.c.getAttribute("toolbar");this.A=null;this.h=void 0;this.D=!1;this.c.classList.add("amp-sidebar-toolbar-target-hidden");ba(this)}P.prototype.onLayoutChange=function(){var a=this.B.win.matchMedia(this.R).matches;a?ca(this):da(this)};
function ba(a){a.A=a.c.cloneNode(!0);var b=x(a.c.getAttribute("toolbar-target"),a.c);a.B.whenReady().then(function(){var c=a.B.getElementById(b);if(c)a.h=c,a.A.classList.add("i-amphtml-toolbar"),N(a.h,!1);else throw Error("Could not find the toolbar-target element with an id: "+b);})}
function ca(a){a.D?Promise.resolve():a.I.mutateElement(function(){a.h&&(N(a.h,!0),a.h.contains(a.A)||a.h.appendChild(a.A),a.c.classList.add("amp-sidebar-toolbar-target-shown"),a.c.classList.remove("amp-sidebar-toolbar-target-hidden"),a.D=!0,O(a.B,a.A))})}function da(a){a.D&&a.I.mutateElement(function(){a.h&&(N(a.h,!1),a.c.classList.add("amp-sidebar-toolbar-target-hidden"),a.c.classList.remove("amp-sidebar-toolbar-target-shown"),a.D=!1)})};function Q(a){var b=a.indexOf("#");return-1==b?a:a.substring(0,b)};function R(a){a=AMP.BaseElement.call(this,a)||this;a.m=null;a.G=null;a.M=null;a.o=null;a.l=a.win.document;a.N=a.l.documentElement;a.w=null;a.L=[];var b=D(a.win,"platform");a.K=b.isIos();a.O=b.isSafari();a.C=-1;a.H=!1;a.F=null;a.J=0;return a}var S=AMP.BaseElement;R.prototype=h(S.prototype);R.prototype.constructor=R;if(r)r(R,S);else for(var T in S)if("prototype"!=T)if(Object.defineProperties){var V=Object.getOwnPropertyDescriptor(S,T);V&&Object.defineProperty(R,T,V)}else R[T]=S[T];R.S=S.prototype;
R.prototype.buildCallback=function(){var a=this,b=this.element;b.classList.add("i-amphtml-overlay");b.classList.add("i-amphtml-scrollable");this.w=b.getAttribute("side");this.m=this.getViewport();this.G=y(b,"action");"left"!=this.w&&"right"!=this.w&&(this.w=ea(this,aa(this.l)?"right":"left"),b.setAttribute("side",this.w));var c=u(b.querySelectorAll("nav[toolbar]"));c.forEach(function(b){try{a.L.push(new P(b,a))}catch(g){a.user().error("amp-sidebar toolbar","Failed to instantiate toolbar",g)}});this.K&&
fa(this);W(this)?X(this):b.setAttribute("aria-hidden","true");b.hasAttribute("role")||b.setAttribute("role","menu");b.tabIndex=-1;this.N.addEventListener("keydown",function(b){"Escape"==b.key&&a.j()&&b.preventDefault()});var d=b.getAttribute("data-close-button-aria-label")||"Close the sidebar",e=this.l.createElement("button");e.textContent=d;e.classList.add("i-amphtml-screen-reader");e.tabIndex=-1;e.addEventListener("click",function(){a.j()});b.appendChild(e);this.registerDefaultAction(function(b){return X(a,
b)},"open");this.registerAction("toggle",this.P.bind(this));this.registerAction("close",this.j.bind(this));b.addEventListener("click",function(c){if((c=K(c.target,"A"))&&c.href){var d=y(b,"url").parse(c.href),e=a.getAmpDoc().win.location.href;Q(c.href)==Q(e)&&d.hash&&a.j()}},!0)};R.prototype.onLayoutMeasure=function(){var a=this;this.getAmpDoc().whenReady().then(function(){a.L.forEach(function(a){a.onLayoutChange()})})};function W(a){return a.element.hasAttribute("open")}
R.prototype.P=function(a){W(this)?this.j():X(this,a)};function Y(a,b,c){function d(){a.M===b&&a.mutateElement(b)}a.M=b;c?D(a.win,"timer").delay(d,c):d()}function ha(a){N(a.element,!0);a.m.addToFixedLayer(a.element,!0);a.K&&a.O&&ia(a);a.element.scrollTop=1;Y(a,function(){return ja(a)})}
function ja(a){ka(a);a.element.setAttribute("open","");a.element.setAttribute("aria-hidden","false");Y(a,function(){var b=a.getRealChildren();a.scheduleLayout(b);a.scheduleResume(b);try{a.element.focus()}catch(c){}Z(a,"sidebarOpen")},350);O(a.getAmpDoc(),a.element)}
function la(a){a.o&&a.o.classList.toggle("i-amphtml-ghost",!0);a.element.removeAttribute("open");a.element.setAttribute("aria-hidden","true");Y(a,function(){N(a.element,!1);a.schedulePause(a.getRealChildren());Z(a,"sidebarClose")},350)}function X(a,b){W(a)||(a.m.enterOverlayMode(),Y(a,function(){return ha(a)}),F(a.getAmpDoc(),"history").push(a.j.bind(a)).then(function(b){a.C=b}),b&&(a.F=b.caller,a.J=a.m.getScrollTop()))}
R.prototype.j=function(){var a=this;if(!W(this))return!1;this.m.leaveOverlayMode();var b=this.J==this.m.getScrollTop(),c=this.element.contains(this.l.activeElement);Y(this,function(){return la(a)});-1!=this.C&&(F(this.getAmpDoc(),"history").pop(this.C),this.C=-1);if(this.F&&c&&b)try{this.F.focus()}catch(d){}return!0};function ea(a,b){return K(a.element,"amp-story")?"left"==b?"right":"left":b}
function ka(a){if(!a.o){var b=a.l.createElement("div");b.classList.add("i-amphtml-sidebar-mask");b.addEventListener("click",function(){a.j()});a.element.ownerDocument.body.appendChild(b);b.addEventListener("touchmove",function(a){a.preventDefault()});a.o=b}a.o.classList.toggle("i-amphtml-ghost",!1)}
function fa(a){a.element.addEventListener("scroll",function(b){W(a)&&(1>a.element.scrollTop?(a.element.scrollTop=1,b.preventDefault()):a.element.scrollHeight==a.element.scrollTop+a.element.offsetHeight&&(--a.element.scrollTop,b.preventDefault()))})}
function ia(a){if(!a.H){var b=a.l.createElement("div"),c={height:"29px",width:"100%","background-color":"transparent"},d;for(d in c){var e=b,f=c[d];var g=e.style;var k=d;if(2>k.length?0:0==k.lastIndexOf("--",0))g=k;else{L||(L=I());var l=L[k];if(!l){l=k;if(void 0===g[k]){var t=k.charAt(0).toUpperCase()+k.slice(1);b:{for(var E=0;E<M.length;E++){var U=M[E]+t;if(void 0!==g[U]){t=U;break b}}t=""}void 0!==g[t]&&(l=t)}L[k]=l}g=l}g&&(e.style[g]=f)}a.element.appendChild(b);a.H=!0}}
function Z(a,b){var c=a.win;var d="amp-sidebar toolbar."+b;var e={};var f={detail:e};Object.assign(f,void 0);"function"==typeof c.CustomEvent?d=new c.CustomEvent(d,f):(c=c.document.createEvent("CustomEvent"),c.initCustomEvent(d,!!f.bubbles,!!f.cancelable,e),d=c);a.G.trigger(a.element,b,d,100)}(function(a){a.registerElement("amp-sidebar",R,"amp-sidebar{position:fixed!important;top:0;max-height:100vh!important;height:100vh;max-width:80vw;background-color:#efefef;min-width:45px!important;outline:none;overflow-x:hidden!important;overflow-y:auto!important;z-index:2147483647;-webkit-overflow-scrolling:touch;will-change:transform}amp-sidebar[side=left]{left:0!important;-webkit-transform:translateX(-100%)!important;transform:translateX(-100%)!important}amp-sidebar[side=right]{right:0!important;-webkit-transform:translateX(100%)!important;transform:translateX(100%)!important}amp-sidebar[side][open]{-webkit-transform:translateX(0)!important;transform:translateX(0)!important}amp-sidebar[side]{-webkit-transition:-webkit-transform 233ms cubic-bezier(0,0,.21,1);transition:-webkit-transform 233ms cubic-bezier(0,0,.21,1);transition:transform 233ms cubic-bezier(0,0,.21,1);transition:transform 233ms cubic-bezier(0,0,.21,1),-webkit-transform 233ms cubic-bezier(0,0,.21,1)}.i-amphtml-toolbar>ol,.i-amphtml-toolbar>ul{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap;overflow:auto;list-style-type:none;padding:0;margin:0}.i-amphtml-sidebar-mask{position:fixed!important;top:0!important;left:0!important;width:100vw!important;height:100vh!important;opacity:0.2;background-image:none!important;background-color:#000;z-index:2147483646}\n/*# sourceURL=/extensions/amp-sidebar/0.1/amp-sidebar.css*/")})(self.AMP);
})});

//# sourceMappingURL=amp-sidebar-0.1.js.map
