(self.AMP=self.AMP||[]).push({n:"amp-vimeo",v:"1905140117570",f:(function(AMP,_){
var f,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},m;if("function"==typeof Object.setPrototypeOf)m=Object.setPrototypeOf;else{var n;a:{var ba={a:!0},ca={};try{ca.__proto__=ba;n=ca.a;break a}catch(a){}n=!1}m=n?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var da=m;function ea(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var fa=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function ha(a){var b=Object.create(null);if(!a)return b;for(var c;c=fa.exec(a);){var d=ea(c[1],c[1]),e=c[2]?ea(c[2],c[2]):"";b[d]=e}return b};var p="";
function ia(a){var b=a||self;if(b.AMP_MODE)var c=b.AMP_MODE;else{c=b;var d=self.AMP_CONFIG||{},e=!!d.test||!1,g=c.__karma__&&c.__karma__.config.amp.testOnIe,h=ha(c.location.originalHash||c.location.hash);d=d.spt;var k=ha(c.location.search);p||(p=c.AMP_CONFIG&&c.AMP_CONFIG.v?c.AMP_CONFIG.v:"011905140117570");c=b.AMP_MODE={localDev:!1,development:!("1"!=h.development&&!c.AMP_DEV_MODE),examiner:"2"==h.development,filter:h.filter,geoOverride:h["amp-geo"],minified:!0,lite:void 0!=k.amp_lite,test:e,testIe:g,
log:h.log,version:"1905140117570",rtvVersion:p,singlePassType:d}}return c};var ja=Object.prototype.toString;function q(a){return"[object Object]"===ja.call(a)}function r(a){return"number"===typeof a&&isFinite(a)};self.log=self.log||{user:null,dev:null,userForEmbed:null};var t=self.log;function u(){if(!t.user)throw Error("failed to call initLogConstructor");return t.user}function ka(){if(t.dev)return t.dev;throw Error("failed to call initLogConstructor");}function v(a,b,c){return u().assert(a,b,c,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)};function w(a,b){var c,d=a.ownerDocument.defaultView,e=d!=(d.__AMP_TOP||d);if(e){if(x(d,b)){var g=y(d,b);if(g)return g}if(!c)return null}a=z(a);a=C(a);return x(a,b)?y(a,b):null}function D(a,b){a=a.__AMP_TOP||a;return y(a,b)}function E(a,b){var c=z(a);c=C(c);return y(c,b)}function z(a){return a.nodeType?D((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function C(a){a=z(a);return a.isSingleDoc()?a.win:a}
function y(a,b){x(a,b);var c=la(a);a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function la(a){var b=a.services;b||(b=a.services={});return b}function x(a,b){a=a.services&&a.services[b];return!(!a||!a.ctor&&!a.obj)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function F(a){var b=Object.create(null);a&&Object.assign(b,a);return b}function G(a){return a||{}};function H(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)};function I(a){a.parentElement&&a.parentElement.removeChild(a)};function J(a){var b=!1,c=null,d=a;return function(a){for(var e=[],h=0;h<arguments.length;++h)e[h-0]=arguments[h];b||(c=d.apply(self,e),b=!0,d=null);return c}};var K,ma="Webkit webkit Moz moz ms O o".split(" ");function na(a){var b={position:"fixed",top:"0",width:"0",height:"0",opacity:"0"},c;for(c in b){var d=a,e=b[c];var g=d.style;var h=c;if(H(h,"--"))g=h;else{K||(K=F());var k=K[h];if(!k){k=h;if(void 0===g[h]){var l=h.charAt(0).toUpperCase()+h.slice(1);b:{for(var A=0;A<ma.length;A++){var B=ma[A]+l;if(void 0!==g[B]){l=B;break b}}l=""}void 0!==g[l]&&(k=l)}K[h]=k}g=k}g&&(d.style[g]=e)}};function oa(a,b){if(b)return Promise.resolve(!1);var c=a.document.createElement("video");c.setAttribute("muted","");c.setAttribute("playsinline","");c.setAttribute("webkit-playsinline","");c.setAttribute("height","0");c.setAttribute("width","0");c.muted=!0;c.playsinline=!0;c.webkitPlaysinline=!0;na(c);(new Promise(function(a){return a(c.play())})).catch(function(){});return Promise.resolve(!c.paused)}var L=null;G({c:!0,v:!0,a:!0,ad:!0,action:!0});var M;function N(a){a=a.ownerDocument||a;M&&M.ownerDocument===a||(M=a.createElement("div"));return pa}function pa(a){M.innerHTML=a[0];var b=M.firstElementChild;M.removeChild(b);return b};function qa(a){var b;try{return JSON.parse(a)}catch(c){return b&&b(c),null}};var O=["<iframe frameborder=0 allowfullscreen></iframe>"];O.raw=O.slice();function ra(a,b){var c=sa;if(null==c[b])return!1;var d=c[b];(Array.isArray(d)?d:[d]).forEach(function(b){a.dispatchCustomEvent(b)});return!0};var P;function ta(a,b,c,d){var e=a,g=c;var h=function(a){try{return g(a)}catch(B){throw self.reportError(B),B;}};var k=ua(),l=!1;d&&(l=d.capture);e.addEventListener(b,h,k?d:l);return function(){e&&e.removeEventListener(b,h,k?d:l);h=e=g=null}}function ua(){if(void 0!==P)return P;P=!1;try{var a={get capture(){P=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return P};function va(a,b,c){var d={detail:c};Object.assign(d,void 0);if("function"==typeof a.CustomEvent)return new a.CustomEvent(b,d);a=a.document.createEvent("CustomEvent");a.initCustomEvent(b,!!d.bubbles,!!d.cancelable,c);return a}function Q(a,b,c){return ta(a,b,c,void 0)}function wa(a,b,c,d){var e=c,g=ta(a,b,function(a){try{e(a)}finally{e=null,g()}},d);return g}function xa(a){var b,c,d=new Promise(function(b){c=wa(a,"load",b,void 0)});d.then(c,c);b&&b(c);return d};var ya={title:"",artist:"",album:"",artwork:[{src:""}]};function za(a){var b=a.querySelector('script[type="application/ld+json"]');if(b){var c=qa(b.textContent);if(c&&c.image){if("string"===typeof c.image)return c.image;if(c.image["@list"]&&"string"===typeof c.image["@list"][0])return c.image["@list"][0];if("string"===typeof c.image.url)return c.image.url;if("string"===typeof c.image[0])return c.image[0]}}}
function Aa(a,b){var c=w(a,"url");if(b&&b.artwork){var d=b.artwork;d.forEach(function(a){if(a){var b=q(a)?a.src:a;v(c.isProtocolValid(b))}})}};function Ba(){this.l=null}f=Ba.prototype;f.add=function(a){var b=this;this.l||(this.l=[]);this.l.push(a);return function(){b.remove(a)}};f.remove=function(a){this.l&&(a=this.l.indexOf(a),-1<a&&this.l.splice(a,1))};f.removeAll=function(){this.l&&(this.l.length=0)};f.fire=function(a){if(this.l)for(var b=this.l,c=0;c<b.length;c++)(0,b[c])(a)};f.getHandlerCount=function(){return this.l?this.l.length:0};function R(){this.J=!1;this.V=new Ba}R.prototype.onSessionEnd=function(a){this.V.add(a)};R.prototype.beginSession=function(){this.J=!0};R.prototype.endSession=function(){this.J&&this.V.fire();this.J=!1};R.prototype.isSessionActive=function(){return this.J};function Ca(a){var b=250,c=4E3;return Math.min(Math.max(a,b),c)};function Da(a,b,c){return b[c]?b[c]:(a=a.querySelector("style["+c+"]"))?b[c]=a:null};var S=['<i-amphtml-video-icon class="amp-video-eq">\n    <div class="amp-video-eq-col">\n      <div class="amp-video-eq-filler"></div>\n      <div class="amp-video-eq-filler"></div>\n    </div>\n  </i-amphtml-video-icon>'];S.raw=S.slice();var T=['<i-amphtml-video-mask class="i-amphtml-fill-content" role=button>\n    </i-amphtml-video-mask>'];T.raw=T.slice();function Ea(a){var b=N(a);return b(T)}
function Fa(a,b){var c=N(b)(S),d=c.firstElementChild;for(b=0;4>b;b++){for(var e=d.cloneNode(!0),g=e.children,h=0;h<g.length;h++){var k=g[h];k.classList.add("amp-video-eq-"+(b+1)+"-"+(h+1))}c.appendChild(e)}I(d);D(a,"platform").isIos()&&c.setAttribute("unpausable","");return c};function Ga(a){var b=this;this.ampdoc=a;this.installAutoplayStyles=J(function(){var a=b.ampdoc.getHeadNode(),d=a.__AMP_CSS_TR;var e=d?d("i-amphtml-video-mask{display:block;z-index:1}.amp-video-eq{display:none}.i-amphtml-video-component:not(amp-video) .amp-video-eq,amp-story .amp-video-eq,amp-video[controls] .amp-video-eq{display:-webkit-box;display:-ms-flexbox;display:flex}[noaudio] .amp-video-eq{display:none!important}.amp-video-eq{pointer-events:none!important;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;bottom:7px;height:12px;opacity:0.8;overflow:hidden;position:absolute;right:7px;width:20px;z-index:1}.amp-video-eq .amp-video-eq-col{-webkit-box-flex:1;-ms-flex:1;flex:1;height:100%;margin-right:1px;position:relative}.amp-video-eq .amp-video-eq-col div{-webkit-animation-name:amp-video-eq-animation;animation-name:amp-video-eq-animation;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-direction:alternate;animation-direction:alternate;background-color:#fafafa;height:100%;position:absolute;width:100%;will-change:transform;-webkit-animation-play-state:paused;animation-play-state:paused}.amp-video-eq[unpausable] .amp-video-eq-col div{-webkit-animation-name:none;animation-name:none}.amp-video-eq[unpausable].amp-video-eq-play .amp-video-eq-col div{-webkit-animation-name:amp-video-eq-animation;animation-name:amp-video-eq-animation}.amp-video-eq.amp-video-eq-play .amp-video-eq-col div{-webkit-animation-play-state:running;animation-play-state:running}.amp-video-eq-1-1{-webkit-animation-duration:0.3s;animation-duration:0.3s}.amp-video-eq-1-1,.amp-video-eq-1-2{-webkit-transform:translateY(60%);transform:translateY(60%)}.amp-video-eq-1-2{-webkit-animation-duration:0.45s;animation-duration:0.45s}.amp-video-eq-2-1{-webkit-animation-duration:0.5s;animation-duration:0.5s}.amp-video-eq-2-1,.amp-video-eq-2-2{-webkit-transform:translateY(30%);transform:translateY(30%)}.amp-video-eq-2-2{-webkit-animation-duration:0.4s;animation-duration:0.4s}.amp-video-eq-3-1{-webkit-animation-duration:0.3s;animation-duration:0.3s}.amp-video-eq-3-1,.amp-video-eq-3-2{-webkit-transform:translateY(70%);transform:translateY(70%)}.amp-video-eq-3-2{-webkit-animation-duration:0.35s;animation-duration:0.35s}.amp-video-eq-4-1{-webkit-animation-duration:0.4s;animation-duration:0.4s}.amp-video-eq-4-1,.amp-video-eq-4-2{-webkit-transform:translateY(50%);transform:translateY(50%)}.amp-video-eq-4-2{-webkit-animation-duration:0.25s;animation-duration:0.25s}@-webkit-keyframes amp-video-eq-animation{0%{-webkit-transform:translateY(100%);transform:translateY(100%)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes amp-video-eq-animation{0%{-webkit-transform:translateY(100%);transform:translateY(100%)}to{-webkit-transform:translateY(0);transform:translateY(0)}}\n/*# sourceURL=/css/video-autoplay.css*/"):
"i-amphtml-video-mask{display:block;z-index:1}.amp-video-eq{display:none}.i-amphtml-video-component:not(amp-video) .amp-video-eq,amp-story .amp-video-eq,amp-video[controls] .amp-video-eq{display:-webkit-box;display:-ms-flexbox;display:flex}[noaudio] .amp-video-eq{display:none!important}.amp-video-eq{pointer-events:none!important;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;bottom:7px;height:12px;opacity:0.8;overflow:hidden;position:absolute;right:7px;width:20px;z-index:1}.amp-video-eq .amp-video-eq-col{-webkit-box-flex:1;-ms-flex:1;flex:1;height:100%;margin-right:1px;position:relative}.amp-video-eq .amp-video-eq-col div{-webkit-animation-name:amp-video-eq-animation;animation-name:amp-video-eq-animation;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-direction:alternate;animation-direction:alternate;background-color:#fafafa;height:100%;position:absolute;width:100%;will-change:transform;-webkit-animation-play-state:paused;animation-play-state:paused}.amp-video-eq[unpausable] .amp-video-eq-col div{-webkit-animation-name:none;animation-name:none}.amp-video-eq[unpausable].amp-video-eq-play .amp-video-eq-col div{-webkit-animation-name:amp-video-eq-animation;animation-name:amp-video-eq-animation}.amp-video-eq.amp-video-eq-play .amp-video-eq-col div{-webkit-animation-play-state:running;animation-play-state:running}.amp-video-eq-1-1{-webkit-animation-duration:0.3s;animation-duration:0.3s}.amp-video-eq-1-1,.amp-video-eq-1-2{-webkit-transform:translateY(60%);transform:translateY(60%)}.amp-video-eq-1-2{-webkit-animation-duration:0.45s;animation-duration:0.45s}.amp-video-eq-2-1{-webkit-animation-duration:0.5s;animation-duration:0.5s}.amp-video-eq-2-1,.amp-video-eq-2-2{-webkit-transform:translateY(30%);transform:translateY(30%)}.amp-video-eq-2-2{-webkit-animation-duration:0.4s;animation-duration:0.4s}.amp-video-eq-3-1{-webkit-animation-duration:0.3s;animation-duration:0.3s}.amp-video-eq-3-1,.amp-video-eq-3-2{-webkit-transform:translateY(70%);transform:translateY(70%)}.amp-video-eq-3-2{-webkit-animation-duration:0.35s;animation-duration:0.35s}.amp-video-eq-4-1{-webkit-animation-duration:0.4s;animation-duration:0.4s}.amp-video-eq-4-1,.amp-video-eq-4-2{-webkit-transform:translateY(50%);transform:translateY(50%)}.amp-video-eq-4-2{-webkit-animation-duration:0.25s;animation-duration:0.25s}@-webkit-keyframes amp-video-eq-animation{0%{-webkit-transform:translateY(100%);transform:translateY(100%)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes amp-video-eq-animation{0%{-webkit-transform:translateY(100%);transform:translateY(100%)}to{-webkit-transform:translateY(0);transform:translateY(0)}}\n/*# sourceURL=/css/video-autoplay.css*/";
(d=a.__AMP_CSS_SM)||(d=a.__AMP_CSS_SM=F());var g=Da(a,d,"amp-extension=amp-video-autoplay");g?g.textContent!==e&&(g.textContent=e):(g=(a.ownerDocument||a).createElement("style"),g.textContent=e,g.setAttribute("amp-extension","amp-video-autoplay"),e=Da(a,d,"amp-runtime"),a.insertBefore(g,e?e.nextSibling:a.firstChild),d["amp-extension=amp-video-autoplay"]=g)});this.da=E(this.ampdoc,"viewport");this.h=null;this.ba=!1;this.L=D(a.win,"timer");this.ea=w(a.getHeadNode(),"action");this.U=function(){for(var a=
0;a<b.h.length;a++){var d=b.h[a];if("paused"!==d.getPlayingState()){U(d,"video-seconds-played");var e=d.video.getCurrentTime(),g=d.video.getDuration();r(e)&&r(g)&&0<g&&(e=va(b.ampdoc.win,"video-manager.timeUpdate",G({time:e,percent:e/g})),b.ea.trigger(d.video.element,"timeUpdate",e,1))}}b.L.delay(b.U,1E3)};this.Y=J(function(){return new Ha(b.ampdoc,b)});this.L.delay(this.U,1E3)}f=Ga.prototype;f.dispose=function(){if(this.h)for(var a=0;a<this.h.length;a++){var b=this.h[a];b.dispose()}};
f.register=function(a){Ia(a);if(a.supportsPlatform()){this.h=this.h||[];var b=new Ja(this,a);Ka(this,b);this.h.push(b);b=b.video.element;b.dispatchCustomEvent("registered");b.classList.add("i-amphtml-video-component");var c=a.signals();c.signal("registered");b.classList.add("i-amphtml-video-interface")}};
function Ia(a){function b(b,e){a.registerAction(b,function(){a.signals().signal("user-interacted");e()},c)}var c=1;b("play",function(){return a.play(!1)});b("pause",function(){return a.pause()});b("mute",function(){return a.mute()});b("unmute",function(){return a.unmute()});b("fullscreen",function(){return a.fullscreenEnter()})}
function Ka(a,b){var c=b.video.element;Q(c,"amp:video:visibility",function(a){var c=a.data;c&&1==c.visible?b.updateVisibility(!0):b.updateVisibility()});Q(c,"reloaded",function(){b.videoLoaded()});if(!a.ba){var d=function(){for(var b=0;b<a.h.length;b++)a.h[b].updateVisibility()};a.da.onScroll(d);a.da.onChanged(d);a.ba=!0}}function La(a,b){for(var c=0;c<a.h.length;c++)if(a.h[c].video===b)return a.h[c];ka().error("video-manager","video is not registered to this video manager");return null}
f.getAnalyticsDetails=function(a){var b;a:{for(b=0;b<this.h.length;b++){var c=this.h[b];if(c.video.element===a){b=c;break a}}ka().error("video-manager","video is not registered to this video manager");b=null}return b?b.getAnalyticsDetails():Promise.resolve()};f.getPlayingState=function(a){return La(this,a).getPlayingState()};f.isMuted=function(a){return La(this,a).isMuted()};f.userInteracted=function(a){return La(this,a).userInteracted()};f.registerForAutoFullscreen=function(a){this.Y().register(a)};
f.ma=function(){return this.Y()};
function Ja(a,b){var c=this;this.K=a;this.j=a.ampdoc;this.video=b;this.T=!0;this.o=this.A=this.$=!1;this.N=new R;this.N.onSessionEnd(function(){return U(c,"video-session")});this.F=new R;this.F.onSessionEnd(function(){return U(c,"video-session-visible")});this.R=function(){var a=c.j.win,b=ia(a).lite;L||(L=J(oa));return L(a,b)};this.X=J(function(){return new V(c.j.win,c)});this.P=this.aa=!1;this.O=null;this.m=!1;(this.hasAutoplay=b.element.hasAttribute("autoplay"))&&this.K.installAutoplayStyles();
this.B=ya;this.ia=function(){c.video.play(!1)};this.ha=function(){c.video.pause()};xa(b.element).then(function(){return c.videoLoaded()});Q(b.element,"pause",function(){U(c,"video-pause");c.A=!1;c.P?c.P=!1:c.N.endSession()});Q(b.element,"playing",function(){c.A=!0;"playing_manual"==c.getPlayingState()&&c.W();var a=c.video,b=a.element;if(!a.preimplementsMediaSessionAPI()&&!b.classList.contains("i-amphtml-disable-mediasession")){a=c.j.win;var g=c.B,h=c.ia,k=c.ha,l=a.navigator;"mediaSession"in l&&a.MediaMetadata&&
(l.mediaSession.metadata=new a.MediaMetadata(ya),Aa(b,g),l.mediaSession.metadata=new a.MediaMetadata(g),l.mediaSession.setActionHandler("play",h),l.mediaSession.setActionHandler("pause",k))}c.N.beginSession();c.o&&c.F.beginSession();U(c,"video-play")});Q(b.element,"muted",function(){return c.m=!0});Q(b.element,"unmuted",function(){return c.m=!1});Q(b.element,"ended",function(){U(c,"video-ended")});Q(b.element,"video-hosted-custom",function(a){a=a.data;var b=a.vars;Ma(c,a.eventType,b)});b.signals().whenSignal("registered").then(function(){var a=
c.video.element;(c.video.preimplementsAutoFullscreen()||!a.hasAttribute("rotate-to-fullscreen")?0:v(c.video.isInteractive(),"Only interactive videos are allowed to enter fullscreen on rotate. Set the `controls` attribute on %s to enable.",a))&&c.K.registerForAutoFullscreen(c);c.updateVisibility();c.hasAutoplay&&Na(c)});this.W=J(function(){var a="firstPlay",b=va(c.j.win,a,G({})),g=c.video.element,h=w(g,"action");h.trigger(g,a,b,1)});Oa(this)}f=Ja.prototype;f.dispose=function(){this.X().stop()};
function Ma(a,b,c){var d={};Object.keys(c).forEach(function(a){d["custom_"+a]=c[a]});U(a,b,d)}function Oa(a){a.video.signals().whenSignal("autoplay-delegated").then(function(){a.T=!1;a.A&&a.video.pause()})}f.isMuted=function(){return this.m};
f.videoLoaded=function(){this.$=!0;this.O=this.video.element.querySelector("video, iframe");if(!this.video.preimplementsMediaSessionAPI()){this.video.getMetadata()&&(this.B=F(this.video.getMetadata()));var a=this.j.win.document;if(!this.B.artwork||0==this.B.artwork.length){var b;(b=za(a))||(b=(b=a.querySelector('meta[property="og:image"]'))?b.getAttribute("content"):void 0);b||(b=(b=a.querySelector('link[rel="shortcut icon"]')||a.querySelector('link[rel="icon"]'))?b.getAttribute("href"):void 0);b&&
(this.B.artwork=[{src:b}])}!this.B.title&&(a=this.video.element.getAttribute("title")||this.video.element.getAttribute("aria-label")||this.O.getAttribute("title")||this.O.getAttribute("aria-label")||a.title)&&(this.B.title=a)}this.X().start();this.updateVisibility();this.o&&Pa(this)};
function Pa(a){E(a.j,"viewer").isVisible()&&a.R().then(function(b){var c=a.hasAutoplay&&!a.userInteracted();c&&b?a.T&&(a.o?(a.F.beginSession(),a.video.play(!0),a.aa=!0):(a.A&&a.F.endSession(),a.video.pause(),a.P=!0)):a.o?a.F.beginSession():a.A&&a.F.endSession()})}function Na(a){a.video.isInteractive()&&a.video.hideControls();a.R().then(function(b){!b&&a.video.isInteractive()?a.video.showControls():(a.video.mute(),Qa(a))})}
function Qa(a){var b=a.video,c=a.video,d=c.element;c=c.win;if(!d.hasAttribute("noaudio")&&!d.signals().get("user-interacted")){var e=Fa(c,d),g=function(a){b.mutateElement(function(){e.classList.toggle("amp-video-eq-play",a)})};b.mutateElement(function(){d.appendChild(e)});var h=[Q(d,"pause",function(){return g(!1)}),Q(d,"playing",function(){return g(!0)})];b.signals().whenSignal("user-interacted").then(function(){var b=a.video,c=b.element;a.W();b.isInteractive()&&b.showControls();b.unmute();h.forEach(function(a){a()});
b=c.querySelector(".amp-video-eq");c=c.querySelector("i-amphtml-video-mask");b&&I(b);c&&I(c)});if(b.isInteractive()){var k=Ea(d),l=function(a){b.mutateElement(function(){var b=a;void 0===b&&(b=k.hasAttribute("hidden"));b?k.removeAttribute("hidden"):k.setAttribute("hidden","")})};b.hideControls();b.mutateElement(function(){d.appendChild(k)});[Q(k,"click",function(){b.signals().signal("user-interacted")}),Q(d,"ad_start",function(){return l(!1)}),Q(d,"ad_end",function(){return l(!0)})].forEach(function(a){return h.push(a)})}}}
f.updateVisibility=function(a){var b=this.o;if(a)this.o=!0;else{var c=this.video.element.getIntersectionChangeEntry().intersectionRatio;this.o=.5<=(r(c)?c:0)}this.o!=b&&this.$&&Pa(this)};f.getPlayingState=function(){return this.A?this.A&&this.aa&&!this.userInteracted()?"playing_auto":"playing_manual":"paused"};f.userInteracted=function(){return null!=this.video.signals().get("user-interacted")};
f.getAnalyticsDetails=function(){var a=this,b=this.video;return this.R().then(function(c){var d=b.element.getLayoutBox(),e=d.width;d=d.height;var g=a.hasAutoplay&&c,h=b.getPlayedRanges(),k=h.reduce(function(a,b){return a+b[1]-b[0]},0);return{autoplay:g,currentTime:b.getCurrentTime(),duration:b.getDuration(),height:d,id:b.element.id,muted:a.m,playedTotal:k,playedRangesJson:JSON.stringify(h),state:a.getPlayingState(),width:e}})};
function Ha(a,b){var c=this;this.K=b;this.j=a;this.C=this.G=null;this.h=[];this.H=function(){return Ra(c)};this.ga=function(a){return"playing_manual"==c.K.getPlayingState(a)};this.fa=function(a,b){a=a.element.getIntersectionChangeEntry();var d=a.intersectionRatio;a=a.boundingClientRect;var e=b.element.getIntersectionChangeEntry();b=e.boundingClientRect;d-=e.intersectionRatio;.1<Math.abs(d)?a=d:(e=E(c.j,"viewport"),d=Sa(e,a),e=Sa(e,b),a=d<e||d>e?d-e:a.top-b.top);return a};Ta(this);Ua(this)}
Ha.prototype.register=function(a){a=a.video;var b=a.element;if("video"==b.querySelector("video, iframe").tagName.toLowerCase())var c=!0;else c=D(this.j.win,"platform"),c=c.isIos()||c.isSafari()?!!{"amp-dailymotion":!0,"amp-ima-video":!0}[b.tagName.toLowerCase()]:!0;c&&(this.h.push(a),Q(b,"pause",this.H),Q(b,"playing",this.H),Q(b,"ended",this.H),a.signals().whenSignal("user-interacted").then(this.H),Ra(this))};
function Ua(a){function b(){a.G=null}var c=a.j.getRootNode();Q(c,"webkitfullscreenchange",b);Q(c,"mozfullscreenchange",b);Q(c,"fullscreenchange",b);Q(c,"MSFullscreenChange",b)}Ha.prototype.isInLandscape=function(){var a=this.j.win;return a.screen&&"orientation"in a.screen?H(a.screen.orientation.type,"landscape"):90==Math.abs(a.orientation)};
function Ta(a){var b=a.j.win,c=b.screen;if(c&&"orientation"in c){var d=c.orientation;Q(d,"change",function(){return Va(a)})}Q(b,"orientationchange",function(){return Va(a)})}function Va(a){a.isInLandscape()?null!=a.C&&Wa(a,a.C):a.G&&Xa(a,a.G)}function Wa(a,b){var c=D(a.j.win,"platform");a.G=b;c.isAndroid()&&c.isChrome()?b.fullscreenEnter():Ya(a,b).then(function(){return b.fullscreenEnter()})}function Xa(a,b){a.G=null;Ya(a,b,"center").then(function(){return b.fullscreenExit()})}
function Ya(a,b,c){c=void 0===c?null:c;var d=b.element,e=E(a.j,"viewport");return Za(a).then(function(){var a=d.getIntersectionChangeEntry().boundingClientRect,b=a,k=b.top;b=b.bottom;var l=e.getSize().height,A=0<=k&&b<=l;return A?Promise.resolve():e.animateScrollIntoView(d,c?c:b>l?"bottom":"top")})}function Za(a){var b=330;return D(a.j.win,"timer").promise(b)}
function Ra(a){if(a.isInLandscape())return a.C;a.C=null;var b=a.h.filter(a.ga).sort(a.fa)[0];if(b){var c=b.element.getIntersectionChangeEntry().intersectionRatio;.5<=c&&(a.C=b)}return a.C}function Sa(a,b){var c=b.top+b.height/2,d=a.getSize().height/2;return Math.abs(c-d)}function V(a,b){this.L=D(a,"timer");this.I=b;this.D=null;this.S=this.Z=0}
V.prototype.start=function(){var a=this,b=this.I.video.element;this.stop();this.D=this.D||[];this.D.push(wa(b,"loadedmetadata",function(){$a(a)&&ab(a,a.S)}),Q(b,"ended",function(){$a(a)&&bb(a,100)}))};V.prototype.stop=function(){if(this.D){for(;0<this.D.length;)this.D.pop().call();this.S++}};
function $a(a){var b=a.I.video,c=b.getDuration();if(!c||isNaN(c)||0>=c)return!1;if(250>50*c){var d=5;a.la("This video is too short for `video-percentage-played`. Reports may be innacurate. For best results, use videos over",d,"seconds long.",b.element)}return!0}V.prototype.la=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];u().warn.apply(u(),["video-manager"].concat(b))};
function ab(a,b){if(b==a.S){var c=a.I,d=a.L,e=c.video,g=function(){return ab(a,b)};if("paused"==c.getPlayingState())d.delay(g,500);else{c=e.getDuration();var h=Ca(50*c),k=e.getCurrentTime()/c*100,l=5*Math.floor(k/5);r(l);bb(a,l);d.delay(g,h)}}}function bb(a,b){0>=b||a.Z==b||(a.Z=b,U(a.I,"video-percentage-played",{normalizedPercentage:b.toString()}))}function U(a,b,c){var d=a.video;a.getAnalyticsDetails().then(function(a){c&&Object.assign(a,c);d.element.dispatchCustomEvent(b,a)})};var sa={play:"playing",pause:"pause",ended:"ended",volumechange:null};
function W(a){var b=AMP.BaseElement.call(this,a)||this;b.w=null;b.ca=J(function(){var a="set";return(a=void 0===a?null:a)?a.toLowerCase()+"Volume":"volume"});b.ka=J(function(){return cb(b)});b.m=!1;b.ja=function(a){var c=b.w,e=/^(https?:)?\/\/((player|www).)?vimeo.com(?=$|\/)/;if(c&&a.source==c.contentWindow&&("string"===typeof e?e==a.origin:e.test(a.origin))&&(a=a.data)&&(q(a)||H(a,"{")))if(c=q(a)?a:qa(a),"ready"==c.event||"ping"==c.method)b.ka();else if(a=b.element,!ra(a,c.event)&&"volumechange"==
c.event&&(c=c.data&&c.data.volume))c=0>=c,c!=b.m&&(b.m=c,a.dispatchCustomEvent(c?"muted":"unmuted"))};b.M=null;return b}var X=AMP.BaseElement;W.prototype=aa(X.prototype);W.prototype.constructor=W;if(da)da(W,X);else for(var Y in X)if("prototype"!=Y)if(Object.defineProperties){var db=Object.getOwnPropertyDescriptor(X,Y);db&&Object.defineProperty(W,Y,db)}else W[Y]=X[Y];W.na=X.prototype;f=W.prototype;
f.preconnectCallback=function(a){a=void 0===a?!1:a;var b=this.preconnect;b.url("https://player.vimeo.com",a);b.url("https://i.vimeocdn.com",a);b.url("https://f.vimeocdn.com",a)};f.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a};
f.buildCallback=function(){var a=this.getAmpDoc();a=z(a);var b=C(a),c=la(b),d=c["video-manager"];d||(d=c["video-manager"]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null});d.ctor||d.obj||(d.ctor=Ga,d.context=a,d.resolve&&y(b,"video-manager"))};
f.layoutCallback=function(){var a=this;return eb(this).then(function(b){var c=b,d=a.element;d=v(d.getAttribute("data-videoid"),"The data-videoid attribute is required for <amp-vimeo> %s",d);d="https://player.vimeo.com/video/"+encodeURIComponent(d);if(c&&(a.m=!0,c=encodeURIComponent("muted")+"="+encodeURIComponent("1"),c)){d=d.split("#",2);var e=d[0].split("?",2);c=e[0]+(e[1]?"?"+e[1]+"&"+c:"?"+c);d=c+=d[1]?"#"+d[1]:""}c=d;d=a.element;e=N(d)(O);a.propagateAttributes(["referrerpolicy"],e);e.src=w(d,
"url").assertHttpsUrl(c,d);a.applyFillContent(e);d.appendChild(e);a.w=e;a.M=Q(a.win,"message",a.ja);Z(a,"ping");return a.loadPromise(e)})};f.unlayoutCallback=function(){this.w&&(I(this.w),this.w=null);this.M&&(this.M(),this.M=null);return!0};function eb(a){if(!a.element.hasAttribute("autoplay"))return Promise.resolve(!1);a=a.win;var b=ia(a).lite;L||(L=J(oa));return L(a,b)}
function cb(a){var b=a.element;Object.keys(sa).forEach(function(b){Z(a,"addEventListener",b)});E(b,"video-manager").register(a);b.dispatchCustomEvent("load")}f.pauseCallback=function(){this.pause()};f.pause=function(){Z(this,"pause")};f.play=function(){Z(this,"play")};f.mute=function(){this.m||Z(this,this.ca(),"0")};f.unmute=function(){Z(this,this.ca(),"1")};f.isInteractive=function(){return!0};f.supportsPlatform=function(){return!0};f.preimplementsMediaSessionAPI=function(){return!0};
f.preimplementsAutoFullscreen=function(){return!1};f.fullscreenEnter=function(){};f.fullscreenExit=function(){};f.isFullscreen=function(){return!1};f.showControls=function(){};f.hideControls=function(){};f.getMetadata=function(){};f.getDuration=function(){return 0};f.getCurrentTime=function(){return 0};f.getPlayedRanges=function(){return[]};function Z(a,b,c){c=void 0===c?null:c;if(a.w){var d=a.w.contentWindow;d&&d.postMessage(JSON.stringify(G({method:b,value:c||""})),"*")}}
f.seekTo=function(){this.user().error("amp-vimeo","`seekTo` not supported.")};(function(a){a.registerElement("amp-vimeo",W)})(self.AMP);
})});

//# sourceMappingURL=amp-vimeo-0.1.js.map
